---
layout: post
title: Linux & proxy.
category: [LINUX]
---
<img class="head" src="/media/proxy.png" alt="">
<p>Так вже чомусь склалося, що здається в кожному більш-менш розповсюдженому на сьогодні дистрибутиві користувач обов'язково зіткнеться може зіткнутися з різними нюансами у випадку якщо для виходу в інтернет потрібно використовувати проксі-сервер.
Думаю не зайвим буде нагадати певні очевидні речі котрі стосуються мережевих налаштувань, та вказати на деякі не настільки очевидні. <!--more--></p>
<h4>Базові налаштування</h4>
<ol>
<li>Налаштування проксі для конкретного користувача зберігаються у <b class="path">~/.bashrc</b> у наступному вигляді
<xmp>export http_proxy="http://yourusername:yourpassword@yourproxy:yourport"
export https_proxy="http://yourusername:yourpassword@yourproxy:yourport"
export ftp_proxy="http://yourusername:yourpassword@yourproxy:yourport"</xmp></li>
<li>Налаштування проксі для всієї системи зберігаються у <b class="path">/etc/environment</b> у наступному вигляді
<xmp>http_proxy="http://yourusername:yourpassword@yourproxy:yourport"
https_proxy="http://yourusername:yourpassword@yourproxy:yourport"
ftp_proxy="http://yourusername:yourpassword@yourproxy:yourport"
HTTP_PROXY="http://yourusername:yourpassword@yourproxy:yourport"
HTTPS_PROXY="http://yourusername:yourpassword@yourproxy:yourport"
FTP_PROXY="http://yourusername:yourpassword@yourproxy:yourport"</xmp>
тут рекомендують здублювати параметри у верхньому і нижньому регістрі, але я сам з такою необхідністю не стикався.</li>
<li>Налаштування проксі для роботи <b class="term">wget</b> знаходяться у <b class="path">/etc/wgetrc</b> у вигляді
<xmp>https_proxy = "http://yourusername:yourpassword@yourproxy:yourport/"
http_proxy = "http://yourusername:yourpassword@yourproxy:yourport/"
ftp_proxy = "http://yourusername:yourpassword@yourproxy:yourport/"
use_proxy = on</xmp></li>
<li>Щоб проксі підхватувалося при виконанні команди через <b>sudo</b> треба поправити файл <b class="path">/etc/sudoers</b> додавши
<xmp>Defaults env_keep += "http_proxy https_proxy ftp_proxy all_proxy no_proxy"</xmp></li>
<li>Буває для apt ще потрібно створити файл <b class="path">/etc/apt/apt.conf.d/02proxy</b> з указанням проксі
<xmp>Acquire::http::Proxy "http://yourusername:yourpassword@yourproxy:yourport";</xmp></li>
</ol>
<h4>git</h4>
<p>Для того щоб git використовував проксі необхідно створити файл конфігурації та прописати цей проксі там</p>
<xmp>cd ~
touch .gitconfig
git config --global http.proxy http://proxyuser:proxypass@proxyaddress:8080</xmp>
<h4>ntlm-авторизація</h4>
<p>якщо у вас використовується проксі-сервер з авторизацією можуть виникнути певні проблеми з програмами що системні налаштування ігнорують, а самі авторизуватися не вміють. Обійти це можна використовуючи програми на зразок <b class="term">ntlmaps</b>. Він сам авторизуватиметься на сервері і виступатиме далі в ролі проксі-сервера для "внутрішнього" використання. В такому разі проксі в нас буде<b class="path"> http://127.0.0.1:5865</b>. Також даний спосіб має цікаву й корисну можливість використовувати ваш ПК у якості проксі-сервера і для інших комп'ютерів якщо вказати у файлі конфігурації <b class="path">/etc/ntlmaps/server.cfg</b></p>
<xmp>ALLOW_EXTERNAL_CLIENTS:1</xmp>
