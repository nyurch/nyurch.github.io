---
layout: post
title: Samba-сервер в Ubuntu.
category: [LINUX]
---
<img class="head" src="/media/samba.jpg"  alt="">
<p>Організація доступу до файлів на комп'ютері під керуванням операційної системи <b class="term">Ubuntu</b> за допомогою <b class="term">samba</b>. <b class="term">Samba</b> - реалізація мережевого протоколу <b class="term">SBM/CIFS</b>, що використовується для  надання доступу до файлів, принтерів, портів та реалізації іншої взаємодії між елементами комп'ютерних мереж.<!--more--></p>
<ol>
<li>
Першим кроком є встановлення  самого пакету:
<pre><code>sudo apt-get install samba</code></pre></li>
<li>Додаємо у файл <b class="path">/etc/shells</b> запис <b class="path">/bin/false</b></li>
<li>Створюємо групу для доступу до спільних файлів:
<pre><code>sudo addgroup smbgroup</code></pre></li>
<li>Створюємо в цый групі користувача для доступу до спільних файлів:
<pre><code>sudo useradd samba -s /bin/false
sudo smbpasswd -a samba
sudo usermod -aG smbgroup samba</code></pre>
вводимо для нього пароль з яким він матиме доступ до файлів.</li>
<li>Далі потрібно відкорегувати вміст файлу <b class="path">/etc/samba/smb.conf</b> з урахуванням параметрів мережі та доступу до необхідних ресурсів.</li>
<li>Створюємо директорії і видаємо права на них
<pre><code>sudo chown -R root:smbgroup /home/juno/Samba/write/
sudo chown -R root:smbgroup /home/juno/Samba/read/
sudo chmod -R 0777 /home/juno/Samba/write/
sudo chmod -R 0555 /home/juno/Samba/read/</code></pre></li>
</ol>
<p>Можна використати наступний файл конфігурації. Він налаштований для ПК що знаходиться в робочій групі <b>Workgroup</b>, користувач для авторизованого доступу - <b class="term">samba</b>, та теки до яких надається доступ <b class="path">/home/juno/Samba/read</b> та <b class="path">/home/juno/Samba/write</b>.
</p>
<pre><code>[global]
   workgroup = WORKGROUP
   server string = %h server (Samba, Ubuntu)
   dns proxy = no
   log file = /var/log/samba/log.%m
   max log size = 1000
   syslog = 0
   panic action = /usr/share/samba/panic-action %d
   server role = standalone server
   passdb backend = tdbsam
   obey pam restrictions = yes
   unix password sync = yes
   passwd program = /usr/bin/passwd %u
   passwd chat = *Enter\snew\s*\spassword:* %n\n *Retype\snew\s*\spassword:* %n\n *password\supdated\ssuccessfully* .
   pam password change = yes
   map to guest = bad user
   usershare allow guests = no
   follow symlinks = yes
   wide links = yes
   unix extensions = no
   securiry = USER

[read]
   comment = Software space
   path = /home/juno/Samba/read
   read only = yes
   public = no
   guest ok = no
   guest only = no
   valid users @smbgroup

[write]
   comment = Temporary file space
   path = /home/juno/Samba/write
   read only = no
   public = no
   guest ok = no
   guest only = no
   valid users @smbgroup
   force create mode = 0777
   force directory mode = 0777
</code></pre>
<p> Для анонімного доступу до вказаних ресурсів файл конфігурації та права на директорії такі:
<pre><code>sudo chown -R nobody:nogroup /home/juno/Samba/write/
sudo chown -R nobody:nogroup /home/juno/Samba/read/
sudo chmod -R 0777 /home/juno/Samba/write/
sudo chmod -R 0555 /home/juno/Samba/read/</code></pre></li>
</p>
<pre><code>[global]
   workgroup = WORKGROUP
   server string = %h server (Samba, Ubuntu)
   dns proxy = no
   log file = /var/log/samba/log.%m
   max log size = 1000
   syslog = 0
   panic action = /usr/share/samba/panic-action %d
   server role = standalone server
   passdb backend = tdbsam
   obey pam restrictions = yes
   unix password sync = yes
   passwd program = /usr/bin/passwd %u
   passwd chat = *Enter\snew\s*\spassword:* %n\n *Retype\snew\s*\spassword:* %n\n *password\supdated\ssuccessfully* .
   pam password change = yes
   map to guest = bad user
   usershare allow guests = yes

[read]
   comment = Software space
   path = /home/juno/Samba/read
   read only = yes
   public = yes
   guest ok = Yes
   guest only = Yes

[write]
   comment = Temporary file space
   path = /home/juno/Samba/write
   read only = no
   public = yes
   guest ok = Yes
   guest only = Yes
   force create mode = 0777
   force directory mode = 0777</code></pre>
