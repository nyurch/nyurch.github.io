---
layout: post
title: Перемикання між режимами PIO та DMA у Windows.
category: [ЗАЛІЗО]
---
<img class="head" src="/media/hdd.png" alt="">
<p>Стикнувся на днях з помилкою яку не бачив уже років 5+, після "синього екрану" контролер переключився в режим <term>PIO</term>. Так що от... <!--more-->
Буває що при великій кількості помилок в роботі жорсткого диску Windows змінює режим роботи контролера з <term>Ultra DMA</term> на <term>PIO</term>, відповідно швидкість падає до <term>3.3Мб/с(PIO Mode 0)</term>. Для того щоб повернутися до режиму <term>Ultra DMA</term> потрібно виконати деякі маніпуляції з реєстром:
<ol>
<li>Відключити контроль помилок.
В розділі <path>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Class\{4D36E96A-E325-11CE-BFC1-08002BE10318}</path> у підрозділах <b>0001</b> та <b>0002</b> створити <term>dword-параметр</term> <path>ResetErrorCountersOnSuccess</path> та присвоїти йому значення <b>1</b>.
У цих же розділах перевірити значення параметрів <path>MasterIdDataCheckSum=dword:0, SlaveIdDataCheckSum=dword:0, MasterDeviceTimingModeAllowed=dword:ffffffff, SlaveDeviceTimingModeAllowed=dword:ffffffff</path></li>
<li>Потрібному параметру, <term>MasterDeviceTimingMode</term> чи <term>SlaveDeviceTimingMode</term>, присвоїти бажане значення:
<ul>
<li>0x10010 - UDMA Mode 5 (ATA100)</li>
<li>0x8010 - UDMA Mode 4 (ATA66)</li>
<li>0x2010 - UDMA Mode 2 (ATA33)</li>
<li>0x0410 - Multi-Word DMA Mode 2</li></ul></li>
<li>Перезавантажитися.</li>
</ol>
<p>Також можна в Диспетчері пристроїв видалити IDE-контролер і перезавантажитися, але бувало не піднімалася система після такого.</p>

